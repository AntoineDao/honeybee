<!doctype html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />

    <title>honeybee.radiance.recipe.imagebased API documentation</title>
    <meta name="description" content="Radiance Grid-based Analysis Recipe." />

  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300' rel='stylesheet' type='text/css'>

  <!-- highlight.js for highlighting source code. -->
  <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.2.0/styles/default.min.css">
  <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.2.0/highlight.min.js"></script>

  
  <style type="text/css">
  
* {
  box-sizing: border-box;
}
/*! normalize.css v1.1.1 | MIT License | git.io/normalize */

/* ==========================================================================
   HTML5 display definitions
   ========================================================================== */

/**
 * Correct `block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
nav,
section,
summary {
    display: block;
}

/**
 * Correct `inline-block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

audio,
canvas,
video {
    display: inline-block;
    *display: inline;
    *zoom: 1;
}

/**
 * Prevent modern browsers from displaying `audio` without controls.
 * Remove excess height in iOS 5 devices.
 */

audio:not([controls]) {
    display: none;
    height: 0;
}

/**
 * Address styling not present in IE 7/8/9, Firefox 3, and Safari 4.
 * Known issue: no IE 6 support.
 */

[hidden] {
    display: none;
}

/* ==========================================================================
   Base
   ========================================================================== */

/**
 * 1. Prevent system color scheme's background color being used in Firefox, IE,
 *    and Opera.
 * 2. Prevent system color scheme's text color being used in Firefox, IE, and
 *    Opera.
 * 3. Correct text resizing oddly in IE 6/7 when body `font-size` is set using
 *    `em` units.
 * 4. Prevent iOS text size adjust after orientation change, without disabling
 *    user zoom.
 */

html {
    background: #fff; /* 1 */
    color: #000; /* 2 */
    font-size: 100%; /* 3 */
    -webkit-text-size-adjust: 100%; /* 4 */
    -ms-text-size-adjust: 100%; /* 4 */
}

/**
 * Address `font-family` inconsistency between `textarea` and other form
 * elements.
 */

html,
button,
input,
select,
textarea {
    font-family: sans-serif;
}

/**
 * Address margins handled incorrectly in IE 6/7.
 */

body {
    margin: 0;
}

/* ==========================================================================
   Links
   ========================================================================== */

/**
 * Address `outline` inconsistency between Chrome and other browsers.
 */

a:focus {
    outline: thin dotted;
}

/**
 * Improve readability when focused and also mouse hovered in all browsers.
 */

a:active,
a:hover {
    outline: 0;
}

/* ==========================================================================
   Typography
   ========================================================================== */

/**
 * Address font sizes and margins set differently in IE 6/7.
 * Address font sizes within `section` and `article` in Firefox 4+, Safari 5,
 * and Chrome.
 */

h1 {
    font-size: 2em;
    margin: 0.67em 0;
}

h2 {
    font-size: 1.5em;
    margin: 0.83em 0;
}

h3 {
    font-size: 1.17em;
    margin: 1em 0;
}

h4 {
    font-size: 1em;
    margin: 1.33em 0;
}

h5 {
    font-size: 0.83em;
    margin: 1.67em 0;
}

h6 {
    font-size: 0.67em;
    margin: 2.33em 0;
}

/**
 * Address styling not present in IE 7/8/9, Safari 5, and Chrome.
 */

abbr[title] {
    border-bottom: 1px dotted;
}

/**
 * Address style set to `bolder` in Firefox 3+, Safari 4/5, and Chrome.
 */

b,
strong {
    font-weight: bold;
}

blockquote {
    margin: 1em 40px;
}

/**
 * Address styling not present in Safari 5 and Chrome.
 */

dfn {
    font-style: italic;
}

/**
 * Address differences between Firefox and other browsers.
 * Known issue: no IE 6/7 normalization.
 */

hr {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    height: 0;
}

/**
 * Address styling not present in IE 6/7/8/9.
 */

mark {
    background: #ff0;
    color: #000;
}

/**
 * Address margins set differently in IE 6/7.
 */

p,
pre {
    margin: 1em 0;
}

/**
 * Correct font family set oddly in IE 6, Safari 4/5, and Chrome.
 */

code,
kbd,
pre,
samp {
    font-family: monospace, serif;
    _font-family: 'courier new', monospace;
    font-size: 0.9em;
}

/**
 * Improve readability of pre-formatted text in all browsers.
 */

pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
}

/**
 * Address CSS quotes not supported in IE 6/7.
 */

q {
    quotes: none;
}

/**
 * Address `quotes` property not supported in Safari 4.
 */

q:before,
q:after {
    content: '';
    content: none;
}

/**
 * Address inconsistent and variable font size in all browsers.
 */

small {
    font-size: 80%;
}

/**
 * Prevent `sub` and `sup` affecting `line-height` in all browsers.
 */

sub,
sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sup {
    top: -0.5em;
}

sub {
    bottom: -0.25em;
}

/* ==========================================================================
   Lists
   ========================================================================== */

/**
 * Address margins set differently in IE 6/7.
 */

dl,
menu,
ol,
ul {
    margin: 1em 0;
}

dd {
    margin: 0 0 0 40px;
}

/**
 * Address paddings set differently in IE 6/7.
 */

menu,
ol,
ul {
    padding: 0 0 0 40px;
}

/**
 * Correct list images handled incorrectly in IE 7.
 */

nav ul,
nav ol {
    list-style: none;
    list-style-image: none;
}

/* ==========================================================================
   Embedded content
   ========================================================================== */

/**
 * 1. Remove border when inside `a` element in IE 6/7/8/9 and Firefox 3.
 * 2. Improve image quality when scaled in IE 7.
 */

img {
    border: 0; /* 1 */
    -ms-interpolation-mode: bicubic; /* 2 */
}

/**
 * Correct overflow displayed oddly in IE 9.
 */

svg:not(:root) {
    overflow: hidden;
}

/* ==========================================================================
   Figures
   ========================================================================== */

/**
 * Address margin not present in IE 6/7/8/9, Safari 5, and Opera 11.
 */

figure {
    margin: 0;
}

/* ==========================================================================
   Forms
   ========================================================================== */

/**
 * Correct margin displayed oddly in IE 6/7.
 */

form {
    margin: 0;
}

/**
 * Define consistent border, margin, and padding.
 */

fieldset {
    border: 1px solid #c0c0c0;
    margin: 0 2px;
    padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct color not being inherited in IE 6/7/8/9.
 * 2. Correct text not wrapping in Firefox 3.
 * 3. Correct alignment displayed oddly in IE 6/7.
 */

legend {
    border: 0; /* 1 */
    padding: 0;
    white-space: normal; /* 2 */
    *margin-left: -7px; /* 3 */
}

/**
 * 1. Correct font size not being inherited in all browsers.
 * 2. Address margins set differently in IE 6/7, Firefox 3+, Safari 5,
 *    and Chrome.
 * 3. Improve appearance and consistency in all browsers.
 */

button,
input,
select,
textarea {
    font-size: 100%; /* 1 */
    margin: 0; /* 2 */
    vertical-align: baseline; /* 3 */
    *vertical-align: middle; /* 3 */
}

/**
 * Address Firefox 3+ setting `line-height` on `input` using `!important` in
 * the UA stylesheet.
 */

button,
input {
    line-height: normal;
}

/**
 * Address inconsistent `text-transform` inheritance for `button` and `select`.
 * All other form control elements do not inherit `text-transform` values.
 * Correct `button` style inheritance in Chrome, Safari 5+, and IE 6+.
 * Correct `select` style inheritance in Firefox 4+ and Opera.
 */

button,
select {
    text-transform: none;
}

/**
 * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
 *    and `video` controls.
 * 2. Correct inability to style clickable `input` types in iOS.
 * 3. Improve usability and consistency of cursor style between image-type
 *    `input` and others.
 * 4. Remove inner spacing in IE 7 without affecting normal text inputs.
 *    Known issue: inner spacing remains in IE 6.
 */

button,
html input[type="button"], /* 1 */
input[type="reset"],
input[type="submit"] {
    -webkit-appearance: button; /* 2 */
    cursor: pointer; /* 3 */
    *overflow: visible;  /* 4 */
}

/**
 * Re-set default cursor for disabled elements.
 */

button[disabled],
html input[disabled] {
    cursor: default;
}

/**
 * 1. Address box sizing set to content-box in IE 8/9.
 * 2. Remove excess padding in IE 8/9.
 * 3. Remove excess padding in IE 7.
 *    Known issue: excess padding remains in IE 6.
 */

input[type="checkbox"],
input[type="radio"] {
    box-sizing: border-box; /* 1 */
    padding: 0; /* 2 */
    *height: 13px; /* 3 */
    *width: 13px; /* 3 */
}

/**
 * 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome.
 * 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome
 *    (include `-moz` to future-proof).
 */

input[type="search"] {
    -webkit-appearance: textfield; /* 1 */
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box; /* 2 */
    box-sizing: content-box;
}

/**
 * Remove inner padding and search cancel button in Safari 5 and Chrome
 * on OS X.
 */

input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
}

/**
 * Remove inner padding and border in Firefox 3+.
 */

button::-moz-focus-inner,
input::-moz-focus-inner {
    border: 0;
    padding: 0;
}

/**
 * 1. Remove default vertical scrollbar in IE 6/7/8/9.
 * 2. Improve readability and alignment in all browsers.
 */

textarea {
    overflow: auto; /* 1 */
    vertical-align: top; /* 2 */
}

/* ==========================================================================
   Tables
   ========================================================================== */

/**
 * Remove most spacing between table cells.
 */

table {
    border-collapse: collapse;
    border-spacing: 0;
}

  </style>

  <style type="text/css">
  
  html, body {
    margin: 0;
    padding: 0;
    min-height: 100%;
  }
  body {
    background: #fff;
    font-family: "Source Sans Pro", "Helvetica Neueue", Helvetica, sans;
    font-weight: 300;
    font-size: 16px;
    line-height: 1.6em;
  }
  #content {
    width: 70%;
    margin-left: 25%;
    max-width: 90%;
    float: left;
    padding: 30px 60px;
    border-left: 1px solid #ddd;
  }
  #sidebar {
    position: fixed;
    height: 100%;
    width: 25%;
    float: left;
    padding: 30px;
    overflow-x: hidden;
    overflow-y: auto;
  }
  #nav {
    font-size: 130%;
    margin: 0 0 15px 0;
  }

  #top {
    display: block;
    position: fixed;
    bottom: 5px;
    left: 5px;
    font-size: .85em;
    text-transform: uppercase;
  }

  #footer {
    font-size: .75em;
    padding: 5px 30px;
    border-top: 1px solid #ddd;
    text-align: right;
  }
    #footer p {
      margin: 0 0 0 30px;
      display: inline-block;
    }

  h1, h2, h3, h4, h5 {
    font-weight: 300;
  }
  h1 {
    font-size: 2.5em;
    line-height: 1.1em;
    margin: 0 0 .50em 0;
  }

  h2 {
    font-size: 1.75em;
    margin: 1em 0 .50em 0;
  }

  h3 {
    margin: 25px 0 10px 0;
  }

  h4 {
    margin: 0;
    font-size: 105%;
  }

  a {
    color: #058;
    text-decoration: none;
    transition: color .3s ease-in-out;
  }

  a:hover {
    color: #e08524;
    transition: color .3s ease-in-out;
  }

  pre, code, .mono, .name {
    font-family: "Ubuntu Mono", "Cousine", "DejaVu Sans Mono", monospace;
  }

  .title .name {
    font-weight: bold;
  }
  .section-title {
    margin-top: 2em;
  }
  .ident {
    color: #900;
  }

  pre {
    background: #fefefe;
    border: 1px solid #ddd;
    box-shadow: 2px 2px 0 #f3f3f3;
    margin: 0 30px;
    padding: 15px 30px;
  }

  .codehilite {
    margin: 0 30px 10px 30px;
  }

    .codehilite pre {
      margin: 0;
    }
    .codehilite .err { background: #ff3300; color: #fff !important; }

  table#module-list {
    font-size: 110%;
  }

    table#module-list tr td:first-child {
      padding-right: 10px;
      white-space: nowrap;
    }

    table#module-list td {
      vertical-align: top;
      padding-bottom: 8px;
    }

      table#module-list td p {
        margin: 0 0 7px 0;
      }

  .def {
    display: table;
  }

    .def p {
      display: table-cell;
      vertical-align: top;
      text-align: left;
    }

    .def p:first-child {
      white-space: nowrap;
    }

    .def p:last-child {
      width: 100%;
    }


  #index {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }
    ul#index .class_name {
      /* font-size: 110%; */
      font-weight: bold;
    }
    #index ul {
      margin: 0;
    }

  .item {
    margin: 0 0 15px 0;
  }

    .item .class {
      margin: 0 0 25px 30px;
    }

      .item .class ul.class_list {
        margin: 0 0 20px 0;
      }

    .item .name {
      background: #fafafa;
      margin: 0;
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 3px;
      display: inline-block;
      min-width: 40%;
    }
      .item .name:hover {
        background: #f6f6f6;
      }

    .item .empty_desc {
      margin: 0 0 5px 0;
      padding: 0;
    }

    .item .inheritance {
      margin: 3px 0 0 30px;
    }

    .item .inherited {
      color: #666;
    }

    .item .desc {
      padding: 0 8px;
      margin: 0;
    }

      .item .desc p {
        margin: 0 0 10px 0;
      }

    .source_cont {
      margin: 0;
      padding: 0;
    }

    .source_link a {
      background: #ffc300;
      font-weight: 400;
      font-size: .75em;
      text-transform: uppercase;
      color: #fff;
      text-shadow: 1px 1px 0 #f4b700;

      padding: 3px 8px;
      border-radius: 2px;
      transition: background .3s ease-in-out;
    }
      .source_link a:hover {
        background: #FF7200;
        text-shadow: none;
        transition: background .3s ease-in-out;
      }

    .source {
      display: none;
      max-height: 600px;
      overflow-y: auto;
      margin-bottom: 15px;
    }

      .source .codehilite {
        margin: 0;
      }

  .desc h1, .desc h2, .desc h3 {
    font-size: 100% !important;
  }

  .desc {
    white-space: pre-wrap;
  }

  .clear {
    clear: both;
  }

  @media all and (max-width: 950px) {
    #sidebar {
        position: inherit;
        float: none;
        width: auto;
    }
    #content {
      width: 95%;
      margin-left: auto;
      border-left: none;
      padding: 30px;
    }
  }
  @media all and (max-width: 650px) {
    #top {
      display: none;
    }
    #sidebar {
      float: none;
      width: auto;
    }
    #content {
      float: none;
      width: auto;
      padding: 30px;
    }

    #index ul {
      padding: 0;
      margin-bottom: 15px;
    }
    #index ul li {
      display: inline-block;
      margin-right: 30px;
    }
    #footer {
      text-align: left;
    }
    #footer p {
      display: block;
      margin: inherit;
    }
  }

  /*****************************/

  </style>


  <style type="text/css">
  
/* ==========================================================================
   EXAMPLE Media Queries for Responsive Design.
   These examples override the primary ('mobile first') styles.
   Modify as content requires.
   ========================================================================== */

@media only screen and (min-width: 35em) {
    /* Style adjustments for viewports that meet the condition */
}

@media print,
       (-o-min-device-pixel-ratio: 5/4),
       (-webkit-min-device-pixel-ratio: 1.25),
       (min-resolution: 120dpi) {
    /* Style adjustments for high resolution devices */
}

/* ==========================================================================
   Print styles.
   Inlined to avoid required HTTP connection: h5bp.com/r
   ========================================================================== */

@media print {
    * {
        background: transparent !important;
        color: #000 !important; /* Black prints faster: h5bp.com/s */
        box-shadow: none !important;
        text-shadow: none !important;
    }

    a,
    a:visited {
        text-decoration: underline;
    }

    a[href]:after {
        content: " (" attr(href) ")";
    }

    abbr[title]:after {
        content: " (" attr(title) ")";
    }

    /*
     * Don't show links for images, or javascript/internal links
     */

    .ir a:after,
    a[href^="javascript:"]:after,
    a[href^="#"]:after {
        content: "";
    }

    pre,
    blockquote {
        border: 1px solid #999;
        page-break-inside: avoid;
    }

    thead {
        display: table-header-group; /* h5bp.com/t */
    }

    tr,
    img {
        page-break-inside: avoid;
    }

    img {
        max-width: 100% !important;
    }

    @page {
        margin: 0.5cm;
    }

    p,
    h2,
    h3 {
        orphans: 3;
        widows: 3;
    }

    h2,
    h3 {
        page-break-after: avoid;
    }
}

  </style>

  <script type="text/javascript">
  function toggle(id, $link) {
    $node = document.getElementById(id);
    if (!$node)
    return;
    if (!$node.style.display || $node.style.display == 'none') {
    $node.style.display = 'block';
    $link.innerHTML = 'Hide source &nequiv;';
    } else {
    $node.style.display = 'none';
    $link.innerHTML = 'Show source &equiv;';
    }
  }
  </script>
</head>
<body>
<a href="#" id="top">Top</a>

<div id="container">
    
  
  <div id="sidebar">
    <h1>Index</h1>
    <ul id="index">


    <li class="set"><h3><a href="#header-classes">Classes</a></h3>
      <ul>
        <li class="mono">
        <span class="class_name"><a href="#honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe">ImageBasedAnalysisRecipe</a></span>
        
          
  <ul>
    <li class="mono"><a href="#honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.relpath">relpath</a></li>
    <li class="mono"><a href="#honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.__init__">__init__</a></li>
    <li class="mono"><a href="#honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.ToString">ToString</a></li>
    <li class="mono"><a href="#honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.header">header</a></li>
    <li class="mono"><a href="#honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.populateSubFolders">populateSubFolders</a></li>
    <li class="mono"><a href="#honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.prepareSubFolder">prepareSubFolder</a></li>
    <li class="mono"><a href="#honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.results">results</a></li>
    <li class="mono"><a href="#honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.run">run</a></li>
    <li class="mono"><a href="#honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.toRadString">toRadString</a></li>
    <li class="mono"><a href="#honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.toRadStringGeometries">toRadStringGeometries</a></li>
    <li class="mono"><a href="#honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.toRadStringMaterials">toRadStringMaterials</a></li>
    <li class="mono"><a href="#honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.toRadStringMaterialsAndGeometries">toRadStringMaterialsAndGeometries</a></li>
    <li class="mono"><a href="#honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.toRadStringViews">toRadStringViews</a></li>
    <li class="mono"><a href="#honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.write">write</a></li>
    <li class="mono"><a href="#honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.writeGeometriesToFile">writeGeometriesToFile</a></li>
    <li class="mono"><a href="#honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.writeMaterialsAndGeometriesToFile">writeMaterialsAndGeometriesToFile</a></li>
    <li class="mono"><a href="#honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.writeMatrialsToFile">writeMatrialsToFile</a></li>
    <li class="mono"><a href="#honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.writeViewsToFile">writeViewsToFile</a></li>
  </ul>

        </li>
      </ul>
    </li>

    </ul>
  </div>

    <article id="content">
      
  

  


  <header id="section-intro">
  <h1 class="title"><span class="name">honeybee.radiance.recipe.imagebased</span> module</h1>
  <p>Radiance Grid-based Analysis Recipe.</p>
  
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-honeybee.radiance.recipe.imagebased', this);">Show source &equiv;</a></p>
  <div id="source-honeybee.radiance.recipe.imagebased" class="source">
    <pre><code>"""Radiance Grid-based Analysis Recipe."""

# from ..postprocess.gridbasedresults import LoadGridBasedDLAnalysisResults
from ._imagebasedbase import GenericImageBasedAnalysisRecipe
from ..parameters.imagebased import ImageBasedParameters
from ..command.oconv import Oconv
from ..command.rpict import Rpict
from ...helper import writeToFile
import os


class ImageBasedAnalysisRecipe(GenericImageBasedAnalysisRecipe):
    """Grid base analysis base class.

    Attributes:
        sky: A honeybee sky for the analysis
        views: List of views.
        simulationType: 0: Illuminance(lux), 1: Radiation (kWh), 2: Luminance (Candela)
            (Default: 0)
        radParameters: Radiance parameters for grid based analysis (rtrace).
            (Default: imagebased.LowQualityImage)
        hbObjects: An optional list of Honeybee surfaces or zones (Default: None).
        subFolder: Analysis subfolder for this recipe. (Default: "gridbased")

    Usage:
        # create the sky
        sky = SkyWithCertainIlluminanceLevel(2000)

        # initiate analysisRecipe
        analysisRecipe = ImageBasedAnalysisRecipe(
            sky, views, simType
            )

        # add honeybee object
        analysisRecipe.hbObjects = HBObjs

        # write analysis files to local drive
        analysisRecipe.write(_folder_, _name_)

        # run the analysis
        analysisRecipe.run(debaug=False)

        # get the results
        print analysisRecipe.results()
    """

    # TODO: implemnt isChanged at DaylightAnalysisRecipe level to reload the results
    # if there has been no changes in inputs.
    def __init__(self, sky, views, simulationType=2, radParameters=None,
                 hbObjects=None, subFolder="imagebased"):
        """Create grid-based recipe."""
        GenericImageBasedAnalysisRecipe.__init__(
            self, views, hbObjects, subFolder)

        self.sky = sky
        """A honeybee sky for the analysis."""

        self.radianceParameters = radParameters
        """Radiance parameters for grid based analysis (rtrace).
            (Default: imagebased.LowQualityImage)"""

        self.simulationType = simulationType
        """Simulation type: 0: Illuminance(lux), 1: Radiation (kWh),
           2: Luminance (Candela) (Default: 0)
        """

        # create a result loader to load the results once the analysis is done.
        # self.loader = LoadGridBasedDLAnalysisResults(self.simulationType,
        #                                              self.resultsFile)

    @property
    def simulationType(self):
        """Get/set simulation Type.

        0: Illuminance(lux), 1: Radiation (kWh), 2: Luminance (Candela) (Default: 0)
        """
        return self.__simType

    @simulationType.setter
    def simulationType(self, value):
        try:
            value = int(value)
        except:
            value = 0

        assert 0 <= value <= 2, \
            "Simulation type should be between 0-2. Current value: {}".format(value)

        # If this is a radiation analysis make sure the sky is climate-based
        if value == 1:
            assert self.sky.isClimateBased, \
                "The sky for radition analysis should be climate-based."

        self.__simType = value

    @property
    def sky(self):
        """Get and set sky definition."""
        return self.__sky

    @sky.setter
    def sky(self, newSky):
        assert hasattr(newSky, "isRadianceSky"), "%s is not a valid Honeybee sky." % type(newSky)
        self.__sky = newSky

    @property
    def radianceParameters(self):
        """Get and set Radiance parameters."""
        return self.__radianceParameters

    @radianceParameters.setter
    def radianceParameters(self, radParameters):
        if not radParameters:
            radParameters = ImageBasedParameters.LowQuality()
        assert hasattr(radParameters, "isRadianceParameters"), \
            "%s is not a radiance parameters." % type(radParameters)
        self.__radianceParameters = radParameters

    def write(self, targetFolder, projectName='untitled', header=True):
        """Write analysis files to target folder.

        Files for an image based analysis are:
            views <*.vf>: A radiance view.
            sky file <*.sky>: Radiance sky for this analysis.
            material file <*.mat>: Radiance materials. Will be empty if HBObjects is None.
            geometry file <*.rad>: Radiance geometries. Will be empty if HBObjects is None.
            sky file <*.sky>: Radiance sky for this analysis.
            batch file <*.bat>: An executable batch file which has the list of commands.
                oconve <*.sky> <projectName.mat> <projectName.rad> <additional radFiles> > <projectName.oct>
                rtrace <radianceParameters> <projectName.oct> > <projectName.res>
            results file <*.hdr>: Results file once the analysis is over.

        Args:
            targetFolder: Path to parent folder. Files will be created under
                targetFolder/gridbased. use self.subFolder to change subfolder name.
            projectName: Name of this project as a string.

        Returns:
            Full path to command.bat
        """
        # 0.prepare target folder
        # create main folder targetFolder\projectName
        sceneFiles = super(
            ImageBasedAnalysisRecipe, self).populateSubFolders(
                targetFolder, projectName)

        # add view folder
        self.prepareSubFolder(os.path.join(targetFolder, projectName),
                              subFolders=('views',))

        # 1.write views
        viewFiles = self.writeViewsToFile(sceneFiles.path + '\\views')

        # 2.write sky file
        skyFile = self.sky.writeToFile(sceneFiles.path + '\\skies')

        # 3.write batch file
        self.commands = []
        self.resultsFile = []

        if header:
            self.commands.append(self.header(sceneFiles.path))

        # # 4.1.prepare oconv
        octSceneFiles = [skyFile, sceneFiles.matFile, sceneFiles.geoFile] + \
            sceneFiles.matFilesAdd + sceneFiles.radFilesAdd + sceneFiles.octFilesAdd

        oc = Oconv(projectName)
        oc.sceneFiles = tuple(self.relpath(f, sceneFiles.path)
                              for f in octSceneFiles)

        self.commands.append(oc.toRadString())

        # # 4.2.prepare rpict
        # TODO: Add overtrue
        for view, f in zip(self.views, viewFiles):
            rp = Rpict('results\\' + view.name,
                       simulationType=self.simulationType,
                       rpictParameters=self.radianceParameters)
            rp.octreeFile = str(oc.outputFile)
            rp.viewFile = self.relpath(f, sceneFiles.path)

            self.commands.append(rp.toRadString())
            self.resultsFile.append(
                os.path.join(sceneFiles.path, str(rp.outputFile)))

        # # 4.3 write batch file
        batchFile = os.path.join(sceneFiles.path, "commands.bat")

        writeToFile(batchFile, "\n".join(self.commands))

        print "Files are written to: %s" % sceneFiles.path
        return batchFile

    def results(self, flattenResults=True):
        """Return results for this analysis."""
        assert self.isCalculated, \
            "You haven't run the Recipe yet. Use self.run " + \
            "to run the analysis before loading the results."

        # self.loader.simulationType = self.simulationType
        # self.loader.resultFiles = self.resultsFile
        # return self.loader.results
        return self.resultsFile

    def ToString(self):
        """Overwrite .NET ToString method."""
        return self.__repr__()

    def __repr__(self):
        """Represent grid based recipe."""
        _analysisType = {
            0: "Illuminance", 1: "Radiation", 2: "Luminance"
        }
        return "%s: %s\n#Views: %d" % \
            (self.__class__.__name__,
             _analysisType[self.simulationType],
             self.numOfViews)
</code></pre>
  </div>

  </header>

  <section id="section-items">


    <h2 class="section-title" id="header-classes">Classes</h2>
      
      <div class="item">
      <p id="honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe" class="name">class <span class="ident">ImageBasedAnalysisRecipe</span></p>
      
  
    <div class="desc"><p>Grid base analysis base class.</p>
<p>Attributes:
    sky: A honeybee sky for the analysis
    views: List of views.
    simulationType: 0: Illuminance(lux), 1: Radiation (kWh), 2: Luminance (Candela)
        (Default: 0)
    radParameters: Radiance parameters for grid based analysis (rtrace).
        (Default: imagebased.LowQualityImage)
    hbObjects: An optional list of Honeybee surfaces or zones (Default: None).
    subFolder: Analysis subfolder for this recipe. (Default: "gridbased")</p>
<p>Usage:
    # create the sky
    sky = SkyWithCertainIlluminanceLevel(2000)</p>
<pre><code># initiate analysisRecipe
analysisRecipe = ImageBasedAnalysisRecipe(
    sky, views, simType
    )

# add honeybee object
analysisRecipe.hbObjects = HBObjs

# write analysis files to local drive
analysisRecipe.write(_folder_, _name_)

# run the analysis
analysisRecipe.run(debaug=False)

# get the results
print analysisRecipe.results()
</code></pre></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe', this);">Show source &equiv;</a></p>
  <div id="source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe" class="source">
    <pre><code>class ImageBasedAnalysisRecipe(GenericImageBasedAnalysisRecipe):
    """Grid base analysis base class.

    Attributes:
        sky: A honeybee sky for the analysis
        views: List of views.
        simulationType: 0: Illuminance(lux), 1: Radiation (kWh), 2: Luminance (Candela)
            (Default: 0)
        radParameters: Radiance parameters for grid based analysis (rtrace).
            (Default: imagebased.LowQualityImage)
        hbObjects: An optional list of Honeybee surfaces or zones (Default: None).
        subFolder: Analysis subfolder for this recipe. (Default: "gridbased")

    Usage:
        # create the sky
        sky = SkyWithCertainIlluminanceLevel(2000)

        # initiate analysisRecipe
        analysisRecipe = ImageBasedAnalysisRecipe(
            sky, views, simType
            )

        # add honeybee object
        analysisRecipe.hbObjects = HBObjs

        # write analysis files to local drive
        analysisRecipe.write(_folder_, _name_)

        # run the analysis
        analysisRecipe.run(debaug=False)

        # get the results
        print analysisRecipe.results()
    """

    # TODO: implemnt isChanged at DaylightAnalysisRecipe level to reload the results
    # if there has been no changes in inputs.
    def __init__(self, sky, views, simulationType=2, radParameters=None,
                 hbObjects=None, subFolder="imagebased"):
        """Create grid-based recipe."""
        GenericImageBasedAnalysisRecipe.__init__(
            self, views, hbObjects, subFolder)

        self.sky = sky
        """A honeybee sky for the analysis."""

        self.radianceParameters = radParameters
        """Radiance parameters for grid based analysis (rtrace).
            (Default: imagebased.LowQualityImage)"""

        self.simulationType = simulationType
        """Simulation type: 0: Illuminance(lux), 1: Radiation (kWh),
           2: Luminance (Candela) (Default: 0)
        """

        # create a result loader to load the results once the analysis is done.
        # self.loader = LoadGridBasedDLAnalysisResults(self.simulationType,
        #                                              self.resultsFile)

    @property
    def simulationType(self):
        """Get/set simulation Type.

        0: Illuminance(lux), 1: Radiation (kWh), 2: Luminance (Candela) (Default: 0)
        """
        return self.__simType

    @simulationType.setter
    def simulationType(self, value):
        try:
            value = int(value)
        except:
            value = 0

        assert 0 <= value <= 2, \
            "Simulation type should be between 0-2. Current value: {}".format(value)

        # If this is a radiation analysis make sure the sky is climate-based
        if value == 1:
            assert self.sky.isClimateBased, \
                "The sky for radition analysis should be climate-based."

        self.__simType = value

    @property
    def sky(self):
        """Get and set sky definition."""
        return self.__sky

    @sky.setter
    def sky(self, newSky):
        assert hasattr(newSky, "isRadianceSky"), "%s is not a valid Honeybee sky." % type(newSky)
        self.__sky = newSky

    @property
    def radianceParameters(self):
        """Get and set Radiance parameters."""
        return self.__radianceParameters

    @radianceParameters.setter
    def radianceParameters(self, radParameters):
        if not radParameters:
            radParameters = ImageBasedParameters.LowQuality()
        assert hasattr(radParameters, "isRadianceParameters"), \
            "%s is not a radiance parameters." % type(radParameters)
        self.__radianceParameters = radParameters

    def write(self, targetFolder, projectName='untitled', header=True):
        """Write analysis files to target folder.

        Files for an image based analysis are:
            views <*.vf>: A radiance view.
            sky file <*.sky>: Radiance sky for this analysis.
            material file <*.mat>: Radiance materials. Will be empty if HBObjects is None.
            geometry file <*.rad>: Radiance geometries. Will be empty if HBObjects is None.
            sky file <*.sky>: Radiance sky for this analysis.
            batch file <*.bat>: An executable batch file which has the list of commands.
                oconve <*.sky> <projectName.mat> <projectName.rad> <additional radFiles> > <projectName.oct>
                rtrace <radianceParameters> <projectName.oct> > <projectName.res>
            results file <*.hdr>: Results file once the analysis is over.

        Args:
            targetFolder: Path to parent folder. Files will be created under
                targetFolder/gridbased. use self.subFolder to change subfolder name.
            projectName: Name of this project as a string.

        Returns:
            Full path to command.bat
        """
        # 0.prepare target folder
        # create main folder targetFolder\projectName
        sceneFiles = super(
            ImageBasedAnalysisRecipe, self).populateSubFolders(
                targetFolder, projectName)

        # add view folder
        self.prepareSubFolder(os.path.join(targetFolder, projectName),
                              subFolders=('views',))

        # 1.write views
        viewFiles = self.writeViewsToFile(sceneFiles.path + '\\views')

        # 2.write sky file
        skyFile = self.sky.writeToFile(sceneFiles.path + '\\skies')

        # 3.write batch file
        self.commands = []
        self.resultsFile = []

        if header:
            self.commands.append(self.header(sceneFiles.path))

        # # 4.1.prepare oconv
        octSceneFiles = [skyFile, sceneFiles.matFile, sceneFiles.geoFile] + \
            sceneFiles.matFilesAdd + sceneFiles.radFilesAdd + sceneFiles.octFilesAdd

        oc = Oconv(projectName)
        oc.sceneFiles = tuple(self.relpath(f, sceneFiles.path)
                              for f in octSceneFiles)

        self.commands.append(oc.toRadString())

        # # 4.2.prepare rpict
        # TODO: Add overtrue
        for view, f in zip(self.views, viewFiles):
            rp = Rpict('results\\' + view.name,
                       simulationType=self.simulationType,
                       rpictParameters=self.radianceParameters)
            rp.octreeFile = str(oc.outputFile)
            rp.viewFile = self.relpath(f, sceneFiles.path)

            self.commands.append(rp.toRadString())
            self.resultsFile.append(
                os.path.join(sceneFiles.path, str(rp.outputFile)))

        # # 4.3 write batch file
        batchFile = os.path.join(sceneFiles.path, "commands.bat")

        writeToFile(batchFile, "\n".join(self.commands))

        print "Files are written to: %s" % sceneFiles.path
        return batchFile

    def results(self, flattenResults=True):
        """Return results for this analysis."""
        assert self.isCalculated, \
            "You haven't run the Recipe yet. Use self.run " + \
            "to run the analysis before loading the results."

        # self.loader.simulationType = self.simulationType
        # self.loader.resultFiles = self.resultsFile
        # return self.loader.results
        return self.resultsFile

    def ToString(self):
        """Overwrite .NET ToString method."""
        return self.__repr__()

    def __repr__(self):
        """Represent grid based recipe."""
        _analysisType = {
            0: "Illuminance", 1: "Radiation", 2: "Luminance"
        }
        return "%s: %s\n#Views: %d" % \
            (self.__class__.__name__,
             _analysisType[self.simulationType],
             self.numOfViews)
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe">ImageBasedAnalysisRecipe</a></li>
          <li>honeybee.radiance.recipe._imagebasedbase.GenericImageBasedAnalysisRecipe</li>
          <li>honeybee.radiance.recipe._recipebase.DaylightAnalysisRecipe</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.relpath">
    <p>def <span class="ident">relpath</span>(</p><p>path, start)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a relative path.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.relpath', this);">Show source &equiv;</a></p>
  <div id="source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.relpath" class="source">
    <pre><code>@staticmethod
def relpath(path, start):
    """Return a relative path."""
    return os.path.relpath(path, start)
</code></pre>
  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.hbObjects" class="name">var <span class="ident">hbObjects</span></p>
            

            
  
    <div class="desc"><p>Get and set Honeybee objects for this recipe.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.isAnalysisRecipe" class="name">var <span class="ident">isAnalysisRecipe</span></p>
            

            
  
    <div class="desc"><p>Return true to indicate it is an analysis recipe.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.numOfViews" class="name">var <span class="ident">numOfViews</span></p>
            

            
  
    <div class="desc"><p>Number of point groups.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.radianceMaterials" class="name">var <span class="ident">radianceMaterials</span></p>
            

            
  
    <div class="desc"><p>Get list of radiance materials for Honeybee objects in this recipe.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.radianceParameters" class="name">var <span class="ident">radianceParameters</span></p>
            

            
  
    <div class="desc"><p>Radiance parameters for grid based analysis (rtrace).
(Default: imagebased.LowQualityImage)</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.scene" class="name">var <span class="ident">scene</span></p>
            

            
  
    <div class="desc"><p>A base scene for the recipe.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.simulationType" class="name">var <span class="ident">simulationType</span></p>
            

            
  
    <div class="desc"><p>Simulation type: 0: Illuminance(lux), 1: Radiation (kWh),
2: Luminance (Candela) (Default: 0)</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.sky" class="name">var <span class="ident">sky</span></p>
            

            
  
    <div class="desc"><p>A honeybee sky for the analysis.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.subFolder" class="name">var <span class="ident">subFolder</span></p>
            

            
  
    <div class="desc"><p>Sub-folder for Grid-based analysis.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.views" class="name">var <span class="ident">views</span></p>
            

            
  
    <div class="desc"><p>Return views.</p></div>
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, sky, views, simulationType=2, radParameters=None, hbObjects=None, subFolder=&#39;imagebased&#39;)</p>
    </div>
    

    
  
    <div class="desc"><p>Create grid-based recipe.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.__init__', this);">Show source &equiv;</a></p>
  <div id="source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.__init__" class="source">
    <pre><code>def __init__(self, sky, views, simulationType=2, radParameters=None,
             hbObjects=None, subFolder="imagebased"):
    """Create grid-based recipe."""
    GenericImageBasedAnalysisRecipe.__init__(
        self, views, hbObjects, subFolder)
    self.sky = sky
    """A honeybee sky for the analysis."""
    self.radianceParameters = radParameters
    """Radiance parameters for grid based analysis (rtrace).
        (Default: imagebased.LowQualityImage)"""
    self.simulationType = simulationType
    """Simulation type: 0: Illuminance(lux), 1: Radiation (kWh),
       2: Luminance (Candela) (Default: 0)
    """
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.ToString">
    <p>def <span class="ident">ToString</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Overwrite .NET ToString method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.ToString', this);">Show source &equiv;</a></p>
  <div id="source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.ToString" class="source">
    <pre><code>def ToString(self):
    """Overwrite .NET ToString method."""
    return self.__repr__()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.header">
    <p>def <span class="ident">header</span>(</p><p>self, targetFolder, includRadPath=True)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the header for bat file.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.header', this);">Show source &equiv;</a></p>
  <div id="source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.header" class="source">
    <pre><code>def header(self, targetFolder, includRadPath=True):
    """Get the header for bat file."""
    dirLine = "%s\ncd %s\n" % (os.path.splitdrive(targetFolder)[0], targetFolder)
    if includRadPath:
        return '\n'.join((getRadiancePathLines(), dirLine))
    else:
        return dirLine
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.populateSubFolders">
    <p>def <span class="ident">populateSubFolders</span>(</p><p>self, targetFolder, projectName=&#39;untitled&#39;, subFolders=(&#39;objects&#39;, &#39;skies&#39;, &#39;results&#39;), removeSubFoldersContent=True)</p>
    </div>
    

    
  
    <div class="desc"><p>Write geometry and material files to folder.</p>
<p>Returns:
    studyFolder, Materil files, geometry files, octree files</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.populateSubFolders', this);">Show source &equiv;</a></p>
  <div id="source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.populateSubFolders" class="source">
    <pre><code>def populateSubFolders(self, targetFolder, projectName='untitled',
                       subFolders=('objects', 'skies', 'results'),
                       removeSubFoldersContent=True):
    """Write geometry and material files to folder.
    Returns:
        studyFolder, Materil files, geometry files, octree files
    """
    if not targetFolder:
        targetFolder = os.path.join(os.environ['USERPROFILE'], 'honeybee')
    _ispath = preparedir(targetFolder, False)
    assert _ispath, "Failed to create %s. Try a different path!" % targetFolder
    projectName = 'untitled' if not projectName else str(projectName)
    _basePath = os.path.join(targetFolder, projectName)
    _ispath = preparedir(_basePath, removeContent=False)
    assert _ispath, "Failed to create %s. Try a different path!" % _basePath
    print 'Preparing %s' % os.path.join(_basePath, self.subFolder)
    # create subfolders inside the folder
    self.prepareSubFolder(_basePath,
                          subFolders=subFolders,
                          removeContent=removeSubFoldersContent)
    if self.scene:
        self.prepareSubFolder(_basePath, subFolders=('scene',),
                              removeContent=self.scene.overwrite)
    _path = os.path.join(_basePath, self.subFolder)
    # Check if anything has changed
    # if not self.isChanged:
    #     print "Inputs has not changed! Check files at %s" % _path
    # 3.write materials and geometry files
    matFile = self.writeMatrialsToFile(_path + '\\objects', projectName)
    geoFile = self.writeGeometriesToFile(_path + '\\objects', projectName)
    # 3.1. copy scene files if anything
    if self.scene:
        if self.scene.numberOfFiles == 1:
            print 'One file from the radiance scene is added to the analysis.'
        else:
            print '%d files from the radiance scene are added to the analysis.' % \
                self.scene.numberOfFiles
        if self.scene.copyLocal:
            matFilesAdd = copyFilesToFolder(
                self.scene.files.mat, _path + '\\scene', self.scene.overwrite)
            radFilesAdd = copyFilesToFolder(
                self.scene.files.rad, _path + '\\scene', self.scene.overwrite)
            octFilesAdd = copyFilesToFolder(
                self.scene.files.oct, _path + '\\scene', self.scene.overwrite)
        else:
            matFilesAdd = self.scene.files.mat
            radFilesAdd = self.scene.files.rad
            octFilesAdd = self.scene.files.oct
    else:
        matFilesAdd, radFilesAdd, octFilesAdd = [], [], []
    files = namedtuple(
        'Files', 'path geoFile matFile radFilesAdd matFilesAdd octFilesAdd'
    )
    return files(_path, geoFile, matFile, radFilesAdd, matFilesAdd,
                 octFilesAdd)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.prepareSubFolder">
    <p>def <span class="ident">prepareSubFolder</span>(</p><p>self, targetFolder, subFolders=(&#39;.tmp&#39;, &#39;objects&#39;, &#39;skies&#39;, &#39;results&#39;), removeContent=True)</p>
    </div>
    

    
  
    <div class="desc"><p>Create subfolders under targetFolder/self.subfolder.</p>
<p>By default a honeybee radiance analysis folder structure is as below.
. taragetFolder
    .. subfolder
        . command.bat
        . <em>.pts  # point files
        . </em>.vf  # view files
        . <em>.oct  # octree files
        .. .tmp (</em>.tmp)  # This folder will be removed after running the analysis
        .. objects (<em>.rad, </em>.mat)
        .. skies (<em>.sky, </em>.wea)
        .. results
            ..matrix (<em>.vmx, </em>.dmx) # only for 3-Phase analysis
            ..hdr (<em>.hdr)  # only for view-based analysis
            ..ill (</em>.ill)  # illuminance values for annual analysis</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.prepareSubFolder', this);">Show source &equiv;</a></p>
  <div id="source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.prepareSubFolder" class="source">
    <pre><code>def prepareSubFolder(self, targetFolder,
                     subFolders=('.tmp', 'objects', 'skies', 'results'),
                     removeContent=True):
    """Create subfolders under targetFolder/self.subfolder.
    By default a honeybee radiance analysis folder structure is as below.
    . taragetFolder
        .. subfolder
            . command.bat
            . *.pts  # point files
            . *.vf  # view files
            . *.oct  # octree files
            .. .tmp (*.tmp)  # This folder will be removed after running the analysis
            .. objects (*.rad, *.mat)
            .. skies (*.sky, *.wea)
            .. results
                ..matrix (*.vmx, *.dmx) # only for 3-Phase analysis
                ..hdr (*.hdr)  # only for view-based analysis
                ..ill (*.ill)  # illuminance values for annual analysis
    """
    for f in subFolders:
        p = os.path.join(targetFolder, self.subFolder, f)
        preparedir(p, removeContent)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.results">
    <p>def <span class="ident">results</span>(</p><p>self, flattenResults=True)</p>
    </div>
    

    
  
    <div class="desc"><p>Return results for this analysis.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.results', this);">Show source &equiv;</a></p>
  <div id="source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.results" class="source">
    <pre><code>def results(self, flattenResults=True):
    """Return results for this analysis."""
    assert self.isCalculated, \
        "You haven't run the Recipe yet. Use self.run " + \
        "to run the analysis before loading the results."
    # self.loader.simulationType = self.simulationType
    # self.loader.resultFiles = self.resultsFile
    # return self.loader.results
    return self.resultsFile
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.run">
    <p>def <span class="ident">run</span>(</p><p>self, commandFile, debug=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Run the analysis.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.run', this);">Show source &equiv;</a></p>
  <div id="source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.run" class="source">
    <pre><code>def run(self, commandFile, debug=False):
    """Run the analysis."""
    assert os.path.isfile(commandFile), \
        ValueError('Failed to find command file: {}'.format(commandFile))
    if debug:
        with open(commandFile, "a") as bf:
            bf.write("\npause\n")
    subprocess.call(commandFile)
    self.isCalculated = True
    # self.isChanged = False
    return True
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.toRadString">
    <p>def <span class="ident">toRadString</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Radiance representation of the recipe.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.toRadString', this);">Show source &equiv;</a></p>
  <div id="source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.toRadString" class="source">
    <pre><code>def toRadString(self):
    """Radiance representation of the recipe."""
    return '\n'.join(self.commands)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.toRadStringGeometries">
    <p>def <span class="ident">toRadStringGeometries</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Return geometries radiance definition as a single multiline string.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.toRadStringGeometries', this);">Show source &equiv;</a></p>
  <div id="source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.toRadStringGeometries" class="source">
    <pre><code>def toRadStringGeometries(self):
    """Return geometries radiance definition as a single multiline string."""
    print 'Number of Honeybee objects: %d' % len(self.hbObjects)
    _geos = (hbo.toRadString(includeMaterials=False, joinOutput=True)
             for hbo in self.hbObjects)
    return "\n".join(_geos)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.toRadStringMaterials">
    <p>def <span class="ident">toRadStringMaterials</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Return radiance definition of materials as a single multiline string.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.toRadStringMaterials', this);">Show source &equiv;</a></p>
  <div id="source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.toRadStringMaterials" class="source">
    <pre><code>def toRadStringMaterials(self):
    """Return radiance definition of materials as a single multiline string."""
    print 'Number of radiance materials: %d' % len(self.radianceMaterials)
    return "\n".join((hbo.toRadString() for hbo in self.radianceMaterials))
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.toRadStringMaterialsAndGeometries">
    <p>def <span class="ident">toRadStringMaterialsAndGeometries</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Return geometries radiance definition as a single multiline string.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.toRadStringMaterialsAndGeometries', this);">Show source &equiv;</a></p>
  <div id="source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.toRadStringMaterialsAndGeometries" class="source">
    <pre><code>def toRadStringMaterialsAndGeometries(self):
    """Return geometries radiance definition as a single multiline string."""
    _mat = self.toRadStringMaterials()
    _geo = self.toRadStringGeometries()
    return "\n".join((_mat, _geo))
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.toRadStringViews">
    <p>def <span class="ident">toRadStringViews</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Return radiance definition of each view as a single multiline string.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.toRadStringViews', this);">Show source &equiv;</a></p>
  <div id="source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.toRadStringViews" class="source">
    <pre><code>def toRadStringViews(self):
    """Return radiance definition of each view as a single multiline string."""
    return '\n'.join((v.toRadString() for v in self.views))
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.write">
    <p>def <span class="ident">write</span>(</p><p>self, targetFolder, projectName=&#39;untitled&#39;, header=True)</p>
    </div>
    

    
  
    <div class="desc"><p>Write analysis files to target folder.</p>
<p>Files for an image based analysis are:
    views &lt;<em>.vf&gt;: A radiance view.
    sky file &lt;</em>.sky&gt;: Radiance sky for this analysis.
    material file &lt;<em>.mat&gt;: Radiance materials. Will be empty if HBObjects is None.
    geometry file &lt;</em>.rad&gt;: Radiance geometries. Will be empty if HBObjects is None.
    sky file &lt;<em>.sky&gt;: Radiance sky for this analysis.
    batch file &lt;</em>.bat&gt;: An executable batch file which has the list of commands.
        oconve &lt;<em>.sky&gt; <projectName.mat> <projectName.rad> <additional radFiles> &gt; <projectName.oct>
        rtrace <radianceParameters> <projectName.oct> &gt; <projectName.res>
    results file &lt;</em>.hdr&gt;: Results file once the analysis is over.</p>
<p>Args:
    targetFolder: Path to parent folder. Files will be created under
        targetFolder/gridbased. use self.subFolder to change subfolder name.
    projectName: Name of this project as a string.</p>
<p>Returns:
    Full path to command.bat</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.write', this);">Show source &equiv;</a></p>
  <div id="source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.write" class="source">
    <pre><code>def write(self, targetFolder, projectName='untitled', header=True):
    """Write analysis files to target folder.
    Files for an image based analysis are:
        views <*.vf>: A radiance view.
        sky file <*.sky>: Radiance sky for this analysis.
        material file <*.mat>: Radiance materials. Will be empty if HBObjects is None.
        geometry file <*.rad>: Radiance geometries. Will be empty if HBObjects is None.
        sky file <*.sky>: Radiance sky for this analysis.
        batch file <*.bat>: An executable batch file which has the list of commands.
            oconve <*.sky> <projectName.mat> <projectName.rad> <additional radFiles> > <projectName.oct>
            rtrace <radianceParameters> <projectName.oct> > <projectName.res>
        results file <*.hdr>: Results file once the analysis is over.
    Args:
        targetFolder: Path to parent folder. Files will be created under
            targetFolder/gridbased. use self.subFolder to change subfolder name.
        projectName: Name of this project as a string.
    Returns:
        Full path to command.bat
    """
    # 0.prepare target folder
    # create main folder targetFolder\projectName
    sceneFiles = super(
        ImageBasedAnalysisRecipe, self).populateSubFolders(
            targetFolder, projectName)
    # add view folder
    self.prepareSubFolder(os.path.join(targetFolder, projectName),
                          subFolders=('views',))
    # 1.write views
    viewFiles = self.writeViewsToFile(sceneFiles.path + '\\views')
    # 2.write sky file
    skyFile = self.sky.writeToFile(sceneFiles.path + '\\skies')
    # 3.write batch file
    self.commands = []
    self.resultsFile = []
    if header:
        self.commands.append(self.header(sceneFiles.path))
    # # 4.1.prepare oconv
    octSceneFiles = [skyFile, sceneFiles.matFile, sceneFiles.geoFile] + \
        sceneFiles.matFilesAdd + sceneFiles.radFilesAdd + sceneFiles.octFilesAdd
    oc = Oconv(projectName)
    oc.sceneFiles = tuple(self.relpath(f, sceneFiles.path)
                          for f in octSceneFiles)
    self.commands.append(oc.toRadString())
    # # 4.2.prepare rpict
    # TODO: Add overtrue
    for view, f in zip(self.views, viewFiles):
        rp = Rpict('results\\' + view.name,
                   simulationType=self.simulationType,
                   rpictParameters=self.radianceParameters)
        rp.octreeFile = str(oc.outputFile)
        rp.viewFile = self.relpath(f, sceneFiles.path)
        self.commands.append(rp.toRadString())
        self.resultsFile.append(
            os.path.join(sceneFiles.path, str(rp.outputFile)))
    # # 4.3 write batch file
    batchFile = os.path.join(sceneFiles.path, "commands.bat")
    writeToFile(batchFile, "\n".join(self.commands))
    print "Files are written to: %s" % sceneFiles.path
    return batchFile
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.writeGeometriesToFile">
    <p>def <span class="ident">writeGeometriesToFile</span>(</p><p>self, targetDir, fileName, mkdir=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Write geometries to file.</p>
<p>Args:
    targetDir: Path to project directory (e.g. c:/ladybug)
    fileName: File name as string. materials will be saved as
        fileName.rad</p>
<p>Returns:
    Path to file in case of success.</p>
<p>Exceptions:
    ValueError if targetDir doesn't exist and mkdir is False.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.writeGeometriesToFile', this);">Show source &equiv;</a></p>
  <div id="source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.writeGeometriesToFile" class="source">
    <pre><code>def writeGeometriesToFile(self, targetDir, fileName, mkdir=False):
    """Write geometries to file.
    Args:
        targetDir: Path to project directory (e.g. c:/ladybug)
        fileName: File name as string. materials will be saved as
            fileName.rad
    Returns:
        Path to file in case of success.
    Exceptions:
        ValueError if targetDir doesn't exist and mkdir is False.
    """
    assert type(fileName) is str, 'fileName should be a string.'
    fileName = fileName if fileName.lower().endswith('.rad') \
        else fileName + '.rad'
    return writeToFile(os.path.join(targetDir, fileName),
                       self.toRadStringGeometries() + "\n", mkdir)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.writeMaterialsAndGeometriesToFile">
    <p>def <span class="ident">writeMaterialsAndGeometriesToFile</span>(</p><p>self, targetDir, fileName, mkdir=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Write geometries to file.</p>
<p>Args:
    targetDir: Path to project directory (e.g. c:/ladybug)
    fileName: File name as string. materials will be saved as
        fileName.rad</p>
<p>Returns:
    Path to file in case of success.</p>
<p>Exceptions:
    ValueError if targetDir doesn't exist and mkdir is False.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.writeMaterialsAndGeometriesToFile', this);">Show source &equiv;</a></p>
  <div id="source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.writeMaterialsAndGeometriesToFile" class="source">
    <pre><code>def writeMaterialsAndGeometriesToFile(self, targetDir, fileName, mkdir=False):
    """Write geometries to file.
    Args:
        targetDir: Path to project directory (e.g. c:/ladybug)
        fileName: File name as string. materials will be saved as
            fileName.rad
    Returns:
        Path to file in case of success.
    Exceptions:
        ValueError if targetDir doesn't exist and mkdir is False.
    """
    assert type(fileName) is str, 'fileName should be a string.'
    fileName = fileName if fileName.lower().endswith('.rad') \
        else fileName + '.rad'
    return writeToFile(os.path.join(targetDir, fileName),
                       self.toRadStringMaterialsAndGeometries() + "\n",
                       mkdir)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.writeMatrialsToFile">
    <p>def <span class="ident">writeMatrialsToFile</span>(</p><p>self, targetDir, fileName, mkdir=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Write materials to file.</p>
<p>Args:
    targetDir: Path to project directory (e.g. c:/ladybug)
    fileName: File name as string. materials will be saved as
        fileName.mat</p>
<p>Returns:
    Path to file in case of success.</p>
<p>Exceptions:
    ValueError if targetDir doesn't exist and mkdir is False.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.writeMatrialsToFile', this);">Show source &equiv;</a></p>
  <div id="source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.writeMatrialsToFile" class="source">
    <pre><code>def writeMatrialsToFile(self, targetDir, fileName, mkdir=False):
    """Write materials to file.
    Args:
        targetDir: Path to project directory (e.g. c:/ladybug)
        fileName: File name as string. materials will be saved as
            fileName.mat
    Returns:
        Path to file in case of success.
    Exceptions:
        ValueError if targetDir doesn't exist and mkdir is False.
    """
    assert type(fileName) is str, 'fileName should be a string.'
    fileName = fileName if fileName.lower().endswith('.mat') \
        else fileName + '.mat'
    return writeToFile(os.path.join(targetDir, fileName),
                       self.toRadStringMaterials() + "\n", mkdir)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.writeViewsToFile">
    <p>def <span class="ident">writeViewsToFile</span>(</p><p>self, targetDir, mkdir=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Write point groups to file.</p>
<p>Args:
    targetDir: Path to project directory (e.g. c:/ladybug)</p>
<p>Returns:
    Path to file in case of success.</p>
<p>Exceptions:
    ValueError if targetDir doesn't exist and mkdir is False.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.writeViewsToFile', this);">Show source &equiv;</a></p>
  <div id="source-honeybee.radiance.recipe.imagebased.ImageBasedAnalysisRecipe.writeViewsToFile" class="source">
    <pre><code>def writeViewsToFile(self, targetDir, mkdir=False):
    """Write point groups to file.
    Args:
        targetDir: Path to project directory (e.g. c:/ladybug)
    Returns:
        Path to file in case of success.
    Exceptions:
        ValueError if targetDir doesn't exist and mkdir is False.
    """
    for v in self.views:
        writeToFile(os.path.join(targetDir, v.name + '.vf'),
                    'rvu ' + v.toRadString() + '\n', mkdir)
    return tuple(os.path.join(targetDir, v.name + '.vf') for v in self.views)
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>

  </section>

    </article>
  <div class="clear"> </div>
  <footer id="footer">
    <p>
      Documentation generated by
      <a href="https://github.com/BurntSushi/pdoc">pdoc 0.3.1</a>
    </p>

    <p>pdoc is in the public domain with the
      <a href="http://unlicense.org">UNLICENSE</a>
    </p>
  </footer>
</div>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>
